language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: redis
  - EC2_REGION: us-east-1
  - secure: lOLPQ1TIT8VfvQ0sh7KJKfP71NkWooeVujkrOh+h1pw1sOqW7DlM5+DSp3BOE8MXaH3pmiHFB7qMzwJcfZx6Tb+iGn2C6Rej++Q8eCZ/i1hIJOYUIBaSUMUmMbVAesbuOzM1IBDiXjM8B6rIJazSPHhX2E2S1NTN/wy5BewbmCL5RVnet/tIE/U7Gktfk19HbR/3wJqBviEZhXa7jnt3VxVSh545NjqHI6MPCu+Kq3dD+ckhmV+RpKsc1ZA5g3ZpqiK2HU5lJJ40aI4FmmT0Xevg0Sf3U+54GiSmFoGm1orjXk41pLuQC8sUhqyIYTWJvr2pHEKXsp1UKWxQA9lg/BiNJXSq7wL8x36Q6EWVntPSeGf4c5mlHCmbyG7TgwlNxFU9VgPuZqVhAmCviKx1jg3DXxKFSkmx6khmPxIcDHvZ917IkbQAJwnGXmqbdCgNKxnd7VqlMbHJpm6HC2A6T4QALcSLYUS0SfGa7dDUBhDGUFgg+tPu12pF+KoA4RuoTklLUBbmVtYmeJwgaFZssx0+UF/LscHJnZxf/rXEjEVKCsHwUish9lQdn3i4lP79pPf2pDpjkWgjHzdnFRpxEhZP0UdGFSEzHUgMLIDLL5HTvhYZ2yCCdhuBtGWoh8t936ca9a9FN3V72PgMzxgoZVejsu4kMuzi9/K476YJv00=
  - secure: iaFyDI17P6JSiEC00AsIISMyK7mp3EmhWoWHroOLyeb1iMAQ+6rNVueGKgzoEp1+vK475OaWMSXdrgsDqIf1flRPFp6phF2kmyNxryhgEzEgLLBhr1gppNgDieJAB1NGFSGO+Xa5MRwe4QnXgNnV03PU6iMQ+10qZmTLdBlQJ6HzInvNPhpq7VXkt67tDH8ZnEVKgjIo3eAEGuE0wBVm/DJfnWGZGd3QN51iNpKOmy64OC2EtGbI8XCNpLIbVBVygBOhn4KvXXLzyfilNObbdnAsxSQVj7ozfAvIZ1YIdoni7RjaVFIs7V1N5mnJcNd19Z+ijqlhjEBtg9Fgus98PIwKJjuL5AJm3n8lWLrnmTtD2CfBeBO/w5hwTAujjENExALq/RucDY2NVEBGQETUQc2JS3QxaGP3hekY0iyXKKMNfPzIt/CxWRXhS/2q/xG2GEoIiGSUy1Nauhx6s9ECm/XEYiWPRZ9Azy/7BnDJLSZJ+yzn2s0xloAbS7e7tzeXJQsHL7/7WNmsowrh9Tm78cISzJJ4pRySX54DUrFnS2E+6exBZ7zN32j2rvd6oik+a2j2iGIvN5auZhrMM2t/vPizomwA/zsncLmpy/P+VXzBJcmFjF6vBuvQaRarmlII/S3vQfllT8aF8w1daLbppH+Wg1LWtMFqyDrFnnzmfSY=
  - secure: c32X3sKxkBBKPqk+W0ur6P2j9c1MYb4ydhSmYgdbr03nYP6gfZJfV3E8DiBYnf8B8Y0m4Cq+U0eWCg9/omfZow6BHJQYvrH7PP5tpiA8JqYliR9TtN6IRchaqI+fr1pw3sH/rPk4maxEQDu4jKaUzPKDpPsedp2CiEleKaKTfZpHKt8UscHv0D6ag+UcXIDX5bN8KYucI66Kc0ga/Wqkyj5GrYeZ0a7+cEISkwBYCTfFySb0SNcokOLeQDoBGXvLrq0YE1Z9rY/br1reIV6xMRQO1zNyxkO4Emqee5UOEb7m3tpYyJ/7GGhNn12xwNcx4VKA9tphrhAZD/z3nDEvM5g7gQWYqkqRCCY8PTeTojTbgNpeXqY0vC7KuvMMcygbMDVKA2QcPVHVD2Bs6IgZH/b+gEjT9F4mPMnhWzAXfgeSuF2UkEugHHEo+FiyxzS8CfuJbBjappYpvhZTOx2OTP6ueYBxwNbJvk3mOAidVWU5PWXWKFgGPteWPI68xhHL4iFdwfpMwgV5G4HVrSpLk6vferN0a8tMztVUCJsNdjwmWKWqHnM6bWGPhUZbLMlYRlZV4CtjdF3XT5XHPbDpP3NOZJmcifMBI7vcoraz6Y8ql4ckkwNKD9bQe8odwgBz2poemOUWOivrG4a+Gvs3NS1OwiIJ2cPcQgXOKmHlNMw=
  - secure: ONs4g8kTNjiCf4WXecEObwl9sTx3KZpZb2xMSSnran0bD9qjiQK9HJhxRhUqOsM3Gd1i0SlJC0ArAB2ftcYHwVi1mUgzCzkog/LicuxBSpJsyQrGr5PMpcj25nhG9cYsVX9qhKIe62enMzmrPoCALY5r5DPaY7KA3RPVosNbyBpJhSqYzi6N5uSHSwMYIoZE2j9cOo/lxiLFnPvzVGodUmNJUezUd6nl3d94xwPdScH8sw1CB1KjRUYdr2I0swpjUe+Zc3N1v6ayrpNldLqpOZzN82g3xJIo1yL082/CbOfwoWJi8UF0RI12YxIzPoa21eUzRtYzL6LUf3Or1aJRD3xOJoCmtai4vy3bGfKM2YQMxo2jiMOoQ8zoMaRBJPd/AZzHpuLKvZq0aH8CIvSo4JYPmuXoMyXo91Gb0MTFT/ROMwJPtxGTdcmvHIEw+/gXoVtMC8ZHfZo4Ng9FBkBq8QxA2igT5LCjoxE8eQY71QxHjUA6Lt7pDYMKqPEmJpk7ed1e0NTAkzJsPGySiqza0JUVbDlOGnWXgULq/y0tDhmHGCLTj8jyKWIbaOQqnOQkr+kPa1z+vBh1/n9U83NlVxDJa4S3KDx3W4b5L98o/wBSvBgaXq3oUnwiP3355b5E/pXH3vR35g6X0vyODy1QmjzhqsUjIGx18xf3+ArfglQ=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
