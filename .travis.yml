language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: redis
  - EC2_REGION: us-east-1
  - secure: HbQUFnSQcy58dkwXsRPyWccylpYY335prWX2DAdcFycDQU4ZEQZC1Z62PkBUqsKlVZzUxPjaqUNQhDZqw1RPpNGDBYRpzNun7F3/EbWcu70L8Nl7X0UY2QRf+42eaEFKFVN1yN+L8vfWohlFcL8zmq8jP3MUlRc6Y+lVjsF0ZFFipMVlMje7z0XNmMef1NYsn8TDcraW4kEdYOC/1pZwgkIjZcegjF6/cKoGCf/5/lnjyQ0W2mT6nqZMN+QMp76aZ4DkP8zM7dG68+dNa886BhoJjXuwMVFPzsVuvSMXIGcGFiL0wgw9Icg5XbbMCJr2WEBFmp2LhIn93np1Lww9f6HrO67y94f/FdAuWFtC5lc+PhYSaFlh7X8hsD2rsikt0qaBaiEe43Ym5QRgdNI1Yquv73Tv6R+Qq6eVd3uXbjc3Yq4+BH8DLyYzBavK3nOql4zQJbNLPcBnxDzBzt+4fVCJrvoZEhYj0El/ICeq3gWawL8mJ1absj+nmD+Se6ZDPI2EGcw3WIhALT7rbZFnzaIz6UnLE2QK0VCStla5YQSyWhNywObtvxvUPxpuGhSiYTQgve+YbwnmCJTZy6l1dAV63t6ZbcJil+IMC69oBNcvuyAtWpWUGS4Azo/zHAWErG/s5AiZUAMHjzdQp4UgvB20c+Il6FaE+HT1xiDmtwY=
  - secure: zW6VBcnrpiK09wME6QGesLpHgL0fCJvj6m+dXgBwS0ngSqttGd+NZFdaPBccOj1/ORGpZfAhHpQ0CDZAHxxcStdGySDj+Ay9Qd4szK2S241icDjxDVNZP2pBPuibOS6Fg3MRXpRKWq72FmziZav2s5/DS00CvzdQ7COJFvYdRKWKRwLEsxaapQRaRWv2cxU6j6THC0k/a4uvrSTorkmcMgRCC3p4jMNzfsciZ5uo2uyIJDlReL1UeaxaZT/HjaywGnf+1Yt2j+uLmK+UrMx1/7R58AzJQ7Y0swwDmA5bV4mpWlyCxk+Vt8TmjIEJBGGqOERvsTRSRGTrplPl2ktfCahai6ai8Bc0d97xYV4DLiMGxH8WdSGeRWLB+J0PrGHsid6W7Hzf8rlisUUvuRiJT8GPCOASNoR1vf/k2UYecdG3uxl9nKn+bpI8M5XzhurNXrz3eZnFiODcFZ04WEvksn8JIGT2jasg/cWoHN1Hw2UcWLc2PUaLCCgCOlbJ04Z9TB3xy+YF7//gYirRVHL2Kj9+7hPs0UbwpsY6uGmcEvGdUT4s4A1gfhtCaEfDoZNP9ryG6DqbUM0le0OGL3/1qt402WEbT1zrkIAPwqrCEbu5w6rgSa9qX5stT7fiPfZ60jhpNUzY8PpBT0WzU8USDDwfeM7Ud/Is4SeR5wXtV0c=
  - secure: seD3DmZzGayrFhVbjDnuOcc7gf9T5r9JE/+HufFPYnSqOyBdqX3im8BjncirE2NwJb507WVYlZ1Jb+Vs8TPJlY1nUxQ08XFajR7EghlLfBbbAiJJ5+2mxbI+vTPVF0h7LFm+UPfei7wi/Ni4vRCIBji6taItFciDxjwd1rrEXEtqce9+M9lU8DtO8BQ+pHaxWtT55DI1QWTGFepE2t6Zkp5XhMmAuxe+CUzREbnxBBf6Olmendq6RUDMrxs+dJirZ6ujTk4C3Sc6Kev7NK/qb0VyX4IHXcra+R2nkmHPDhDxXaFL2Q9KsL6LLjB/4WEro0V8jfn+/S8bLHONVQKtqS6yICaMhDO1V8zptt8etSY2h2M3Wlo8t7L4RbnwDKortEHeep09E1LGJ7sEa5oC7EKAoHQjBH7qdW+e4QY+Pp5M8sMqtTocW5uSFBTuRNDqDB3xyc+g0evxhFEl6vLbgR2rU3mAgB/j8CCiUvoSBggi+nA8nisXH1vmjXHeaVyRExbMKscC025tw2Add43aPXEDOyGbMoI7HVMLprFrO3tuigErlNlttynQ4oUDtz8/OJFMFidCaIcfFO+TIck0rBe1ZPNwonEPMFjWq0DG5XB3iGhbAEwJOarFozOr3w8jlxf7mqRhOk5z+XiN3BbxDePAKNQ1UJLogbDcmsP35lQ=
  - secure: FNltg0u2t/r9d73c/k5xFVTXK61YVoqET8GVstbx8ig6Qdkmqsgh7bT9jFsS50rUtCkxfcwtZOJUZxsOMFkF+41ekRAwxRFdZqZzSHSoRh/xngLPeymYnznvzVSpgCdt/JDVJOhgdBCYONAXbZOzngfvcXGhrPJKw+rYPpWCFLLc3zA8a2rDjhu+Vs/ECiDgN9yFUrAcnNdtvX7qNW5U9EkRoV16gQdvyD/pPOlN2AC2Dz09VYxbQiZv0HDNjid1qLP53G2giwCiNQG9zcry3OUWpv/BY5kpSA6/US+eWEoJOHEy0et4DiH10dQ8GXDabKb26dHSDnoBaXeAk1Lj/N+KXhHwAFO5laszMtGew571mXgOrfwO1iQsIcfeUkvf1J2idmgWNPawaJQFT4VpMNPg1/I7YbAN0fIHg3Ixi9n6h1dI+b/YT+qClz2sBag2tiMdeD6ZkhsOJ3miTDRssbv00dxYMnM/Fkce0/sq/dpFgxNQLvqlVzUlxtZLO+0c+Zq1CYKTpyOrtThKFcLgku60cOMr1gWJkoScn0Nl2TiQbvO6ugj+YCaxpn4w0BL39mHWmDmI2cAyrzOMN5lUeHb1Ju7rXBU88Bt0Sct6H/H8UVJbBPQ7RLQUrki9KikIL35rGunJpGpzXpSRUG/mxfYo6p1WLnSLDGpEvOLpxsM=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
